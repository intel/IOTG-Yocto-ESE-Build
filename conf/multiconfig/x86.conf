# default kernel

PREFERRED_PROVIDER_virtual/kernel = "linux-intel-mainline-5.3"
# this variable key is resolved too late and has to be written manually
# KERNEL_PACKAGE_NAME_pn-${PREFERRED_PROVIDER_virtual/kernel} = "kernel"
KERNEL_PACKAGE_NAME_pn-linux-intel-mainline-5.3 = "kernel"

# Secondary kernels (bleeding edge) bootable through grub
IMAGE_INSTALL_append = " linux-intel-mainline-5.4-kernel-modules"
WKS_EXTRA_KERNELS_append = " linux-intel-mainline-5.4-kernel"
KERNELDEPMODDEPEND_append = " virtual/kernel:do_packagedata linux-intel-mainline-5.4:do_packagedata"
IMAGE_INSTALL_append = " linux-intel-mainline-5.4-kernel-image-signed"
IMAGE_INSTALL_append_pn-core-image-sato-sdk = " linux-intel-mainline-5.4-kernel-dev"

# Try to handle out of tree kernel modules for different kernels
KERNEL_PROVIDERS_append = " linux-intel-mainline-5.3 linux-intel-mainline-5.4"
# internal testing stub
include ${TOPDIR}/conf/internal/kernel.conf
