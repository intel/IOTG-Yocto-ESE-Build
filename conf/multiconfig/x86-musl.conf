require x86-common.inc

SSTATE_DIR = "${TOPDIR}/sstate-cache-${BB_CURRENT_MC}"
TMPDIR="${TOPDIR}/tmp-${BB_CURRENT_MC}"

EFI_PROVIDER = ""
MENDER_FEATURES_DISABLE_append = " mender-grub"
EXTRA_IMAGEDEPENDS_forcevariable = ""
IMAGE_INSTALL_forcevariable = ""

# libc
TCLIBC = "musl"

# kernel
PREFERRED_PROVIDER_virtual/kernel = "linux-dummy"

# we are not really using sysvinit, we just need eudev+busybox in the initramfs
VIRTUAL-RUNTIME_init_manager_libc-musl = "sysvinit"
DISTRO_FEATURES_remove = "systemd bluez5 x11 wayland vulkan alsa pulseaudio msdk"
DISTRO_FEATURES_append = " sysvinit"

# archive settings
INITRAMFS_FSTYPES = "cpio"
INITRAMFS_MAXSIZE = "${@int(round(16 * 1024))}"
IMAGE_ROOTFS_SIZE = "0"

# mender not needed for initramfs images
INHERIT_remove += "mender-setup"
