# this is the standard full sized image with LTS RT kernel as the default boot option
SELECTABLE_KERNEL_DEFAULT = "x86-lts-rt-2020-kernel-default.inc"

# common contents and settings
include x86-image.inc

# Add wifi/bluetooth components to to use out of tree iwlwifi and disable the kernel wifi drivers for kernel 5.10
DISTRO_FEATURES_append = " backport-iwlwifi-5.10"
KERNEL_PROVIDERS_EXTRA_MODULES[5.10] += "${@bb.utils.contains("DISTRO_FEATURES","backport-iwlwifi-5.10", "backport-iwlwifi", "", d)}"
KERNEL_PROVIDERS_EXTRA_MODULES_WIFI_COMPAT += "${@bb.utils.contains("DISTRO_FEATURES","backport-iwlwifi-5.10", "5.10", "", d)}"

APPEND_append = " i915.enable_guc=7"

# DPDK
# -userspace is the non-module content
# -modules has been obsoleted and merged into the main package to match
# the module extension system (KERNEL_PROVIDERS_EXTRA_MODULES)
KERNEL_PROVIDERS_EXTRA_MODULES[5.10] += "dpdk"
